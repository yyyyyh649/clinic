<!-- pages/staff/login/login.wxml -->
<view class="staff-login-container">
  <!-- 顶部装饰 -->
  <view class="header-section">
    <view class="logo">👓</view>
    <text class="title">明亮眼镜店</text>
    <text class="subtitle">店员端</text>
  </view>

  <!-- 登录/注册切换 -->
  <view class="tab-section">
    <view class="tab-item {{activeTab === 'login' ? 'active' : ''}}" bindtap="switchTab" data-tab="login">
      <text>登录</text>
    </view>
    <view class="tab-item {{activeTab === 'register' ? 'active' : ''}}" bindtap="switchTab" data-tab="register">
      <text>注册</text>
    </view>
  </view>

  <!-- 登录表单 -->
  <view class="form-section" wx:if="{{activeTab === 'login'}}">
    <!-- 微信快捷登录 -->
    <button class="wechat-login-btn" bindtap="onWechatLogin">
      <text class="wechat-icon">💬</text>
      <text>微信快捷登录</text>
    </button>
    
    <view class="divider">
      <view class="line"></view>
      <text class="text">或使用手机号登录</text>
      <view class="line"></view>
    </view>
    
    <view class="form-item">
      <text class="label">手机号</text>
      <input 
        class="input-field" 
        type="number" 
        maxlength="11"
        placeholder="请输入手机号" 
        bindinput="onPhoneInput"
        value="{{phone}}"
      />
    </view>
    
    <view class="form-item">
      <text class="label">密码</text>
      <input 
        class="input-field" 
        type="text" 
        password
        placeholder="请输入密码" 
        bindinput="onPasswordInput"
        value="{{password}}"
      />
    </view>

    <button class="submit-btn" bindtap="handleLogin">登录</button>
  </view>

  <!-- 注册表单 -->
  <view class="form-section" wx:if="{{activeTab === 'register'}}">
    <view class="form-item">
      <text class="label">姓名</text>
      <input 
        class="input-field" 
        type="text" 
        placeholder="请输入真实姓名" 
        bindinput="onNameInput"
        value="{{name}}"
      />
    </view>

    <view class="form-item">
      <text class="label">手机号</text>
      <input 
        class="input-field" 
        type="number" 
        maxlength="11"
        placeholder="请输入手机号" 
        bindinput="onPhoneInput"
        value="{{phone}}"
      />
    </view>
    
    <view class="form-item">
      <text class="label">密码</text>
      <input 
        class="input-field" 
        type="text" 
        password
        placeholder="请设置6-16位密码" 
        bindinput="onPasswordInput"
        value="{{password}}"
      />
    </view>

    <view class="form-item">
      <text class="label">确认密码</text>
      <input 
        class="input-field" 
        type="text" 
        password
        placeholder="请再次输入密码" 
        bindinput="onConfirmPasswordInput"
        value="{{confirmPassword}}"
      />
    </view>

    <view class="form-item">
      <text class="label">员工编号</text>
      <input 
        class="input-field" 
        type="text" 
        placeholder="请输入员工编号" 
        bindinput="onStaffIdInput"
        value="{{staffId}}"
      />
    </view>

    <!-- 微信授权绑定 -->
    <view class="wechat-bind-section">
      <text class="bind-label">请授权微信绑定（注册后可用微信登录）</text>
      <button class="wechat-bind-btn" bindtap="onWechatBind">
        <text class="wechat-icon">💬</text>
        <text>{{wechatBound ? '已绑定微信' : '微信授权绑定'}}</text>
      </button>
    </view>

    <button class="submit-btn" bindtap="handleRegister">提交注册</button>
    
    <view class="register-tip">
      <text>* 注册后需要管理员审核通过才能登录</text>
    </view>
  </view>

  <!-- 返回客户端入口 -->
  <view class="back-link" bindtap="goToCustomerApp">
    <text>返回客户端</text>
  </view>
</view>
